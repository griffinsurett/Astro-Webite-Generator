---
// [collection]/[slug].astro
import { render } from 'astro:content';
import CollectionItemLayout from '../../layouts/CollectionItemLayout.astro';
import { getValidatedCollectionItem, formatCollectionName, generateItemPaths } from '../../utils/collections.js';

const { collection, slug } = Astro.params;

// Fetch and validate the collection item
const item = await getValidatedCollectionItem(collection, slug);

// Render the markdown content
const { Content } = await render(item);

// Destructure data for easier access
const { title, description, icon, image } = item.data;

// Set page metadata
const pageTitle = `${title} | ${formatCollectionName(collection)}`;

// Export the getStaticPaths function
export async function getStaticPaths() {
  return await generateItemPaths();
}
---
<CollectionItemLayout title={pageTitle} description={description} image={image}>
  <article>
    <header>
      <h1>{icon || 'ðŸ“„'} {title}</h1>
      <p>{description}</p>
      {image && <img src={image} alt={title} class="item-image" loading="lazy" />}
    </header>
    <section>
      <Content />
    </section>
  </article>
</CollectionItemLayout>

<style>
  /* Your styles here */
  .item-image {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    margin-top: 1rem;
  }
</style>

```
