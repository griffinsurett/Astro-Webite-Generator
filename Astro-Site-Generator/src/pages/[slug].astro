---
import {
  generateSingleSegmentPaths,
  handleSingleSegmentRedirect,
} from "../utils/redirects/redirects";

// 1) Define getStaticPaths using the centralized path generator
export async function getStaticPaths() {
  return await generateSingleSegmentPaths();
}

// 2) Handle redirects using the centralized redirect handler
const { slug } = Astro.params;
const redirectTo = handleSingleSegmentRedirect(slug);
if (redirectTo) {
  return Astro.redirect(redirectTo);
}

// 3) If no redirect is found, redirect to 404
return Astro.redirect("/404");
---

<!-- 
  No HTML is rendered. Redirects are handled above.
-->
