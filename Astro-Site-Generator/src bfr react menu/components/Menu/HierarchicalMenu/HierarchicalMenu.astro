---
import BarMenu from "./BarMenu/BarMenu.astro"; // Import the BarMenu component
import HamburgerMenu from './HamburgerMenu/HamburgerMenu.jsx'; // Import the HamburgerMenu component
import { executeQuery } from "../../../utils/queries/executeQuery.js"; // Ensure correct path

// Define props using Astro's `defineProps`
interface Props {
  queryName: string;
  breakpoint?: number; // Breakpoint in pixels
  barMenuClass?: string; // Custom class for BarMenu
  hamburgerMenuClass?: string; // Custom class for HamburgerMenu
  className?: string; // Additional class for the nav
}

const { 
  queryName, 
  // breakpoint = 768, 
  className = "" 
} = Astro.props;

// Fetch menu items based on the provided query
const menuItems = await executeQuery(queryName);
---
<nav class={`hierarchical-menu ${className}`} aria-label="Main Navigation">
  <div class="bar-menu">
    <BarMenu className="bar-menu" menuItems={menuItems} />
  </div>
  <div class="hamburger-menu">
    <HamburgerMenu 
      Width="75%" 
      client:load 
      menuItems={menuItems} 
    />
    </div>  
</nav>

<style>
  /* Media Query for Screens Smaller Than or Equal to Breakpoint */
  @media (max-width: 768px) {
    .bar-menu {
      display: none;
    }

    .hamburger-menu {
      display: block;
    }
  }

  @media (min-width: 768px) {
    .bar-menu {
      display: block;
    }

    .hamburger-menu {
      display: none;
    }
  }
</style>

